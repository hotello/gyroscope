<body>

  <h1>Gyroscope Demo</h1>

  <p>Gyroscope setup in imports/startup/setup-gyroscope.js and imports/startup/setup-gyroscope-server.js</p>

  <h2>Posts</h2>

  <h3>Forms</h3>
  {{#if Template.subscriptionsReady}}
    {{> Posts_form_insert categoryId=category._id}}
    {{> Posts_form_update postId=post._id}}
  {{/if}}

  <h3>List</h3>
  {{#if Template.subscriptionsReady}}
    {{> postsList categoryId=category._id}}
  {{/if}}

  <h3>Single</h3>
  {{#if Template.subscriptionsReady}}
    {{#Posts_item postId=post._id}}
      <h4>{{post.title}}</h4>
      <p>{{post.body}}</p>
    {{/Posts_item }}
  {{/if}}

  <h2>Categories</h2>

  <h3>Forms</h3>
  {{> Categories_form_insert ""}}
  {{#if Template.subscriptionsReady}}
    {{> Categories_form_update categoryId=category._id}}
  {{/if}}

  <h3>List</h3>
  {{> categoriesList}}

  <h2>Comments</h2>

  <h3>Forms</h3>
  {{#if Template.subscriptionsReady}}
    {{> Comments_form_insert postId=post._id}}
    {{> Comments_form_update commentId=comment._id}}
  {{/if}}

  <h3>List</h3>
  {{#if Template.subscriptionsReady}}
    {{> commentsList postId=post._id}}
  {{/if}}
</body>

<template name="postsList">
  {{#Posts_list query=(query categoryId)}}
    {{#each post in posts}}
      <p>{{post.title}}</p>
    {{/each}}
    {{#if noResults}}
      <p>No results found.</p>
    {{/if}}
    {{#if loading}}
      <p>Loading...</p>
    {{/if}}
    <button class="js-load-more">Load More...</button>
  {{/Posts_list}}
</template>

<template name="categoriesList">
  {{#Categories_list}}
    <p>{{category.name}}</p>
  {{/Categories_list}}
</template>

<template name="commentsList">
  {{#Comments_list postId=postId}}
    <p>{{comment.body}}</p>
  {{/Comments_list}}
</template>
